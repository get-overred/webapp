import{s as se,d as _,i as E,z as O,w as le,n as Z,r as be,a as H,x as T,b as g,o as L,E as ge,p as f,c as v,e as U,f as R,g as A,h as P,t as q,j as I,F as oe,G as ne,H as ie,I as ae,v as we}from"../chunks/DweVjaGk.js";import{S as ue,i as fe,t as $,a as F,g as ce,c as de,d as pe,m as _e,e as me,b as he}from"../chunks/BA73HWMz.js";import{s as C,J as ye}from"../chunks/CxOWflRw.js";function ke(i){let e;const t=i[7].default,s=oe(t,i,i[6],null);return{c(){s&&s.c()},l(r){s&&s.l(r)},m(r,n){s&&s.m(r,n),e=!0},p(r,n){s&&s.p&&(!e||n&64)&&ne(s,t,r,r[6],e?ae(t,r[6],n,null):ie(r[6]),null)},i(r){e||(F(s,r),e=!0)},o(r){$(s,r),e=!1},d(r){s&&s.d(r)}}}function ve(i){let e,t,s,r=i[2]?"Forgot Password":i[1]?"Register":"Login",n,a,u,l,o,c,V,N,j,z,B,D,M,J,y=i[3].error&&K(i),d=i[3].success&&Q(i),m=!i[2]&&X(i),h=i[3].loading&&ee(),b=!i[2]&&te(i),w=!i[1]&&re(i);return{c(){e=P("div"),t=P("form"),s=P("h2"),n=q(r),a=I(),y&&y.c(),u=I(),d&&d.c(),l=I(),m&&m.c(),o=I(),c=P("input"),V=I(),N=P("button"),h&&h.c(),j=q(`
                Submit`),B=I(),b&&b.c(),D=I(),w&&w.c(),this.h()},l(p){e=v(p,"DIV",{class:!0,role:!0});var k=U(e);t=v(k,"FORM",{class:!0});var S=U(t);s=v(S,"H2",{class:!0});var G=U(s);n=R(G,r),G.forEach(_),a=A(S),y&&y.l(S),u=A(S),d&&d.l(S),l=A(S),m&&m.l(S),o=A(S),c=v(S,"INPUT",{type:!0,placeholder:!0,class:!0,"aria-label":!0}),V=A(S),N=v(S,"BUTTON",{type:!0,class:!0});var W=U(N);h&&h.l(W),j=R(W,`
                Submit`),W.forEach(_),S.forEach(_),B=A(k),b&&b.l(k),D=A(k),w&&w.l(k),k.forEach(_),this.h()},h(){f(s,"class","text-center text-green-400 font-black text-5xl pb-5"),f(c,"type","email"),f(c,"placeholder","eMail Address"),f(c,"class","py-3 px-6 w-5/6 text-center text-lg font-bold bg-inherit border-4 border-green-400 border-opacity-75 focus:border-opacity-100 focus:outline-green-400 rounded-full"),c.required=!0,f(c,"aria-label","Email Address"),f(N,"type","submit"),f(N,"class","w-min font-extrabold text-black bg-green-400 bg-opacity-75 rounded-full px-20 py-3 text-center hover:opacity-75 text-lg hover:shadow-md hover:shadow-green-700 flex flex-row transition-none duration-150 disabled:opacity-50 disabled:cursor-not-allowed"),N.disabled=z=i[3].loading,f(t,"class","bg-slate-100 rounded-2xl w-1/2 px-12 py-20 space-y-10 flex flex-col items-center justify-center"),f(e,"class","bg-slate-50 flex flex-col items-center justify-center w-full h-full min-h-screen transition-all duration-500"),f(e,"role","main")},m(p,k){E(p,e,k),g(e,t),g(t,s),g(s,n),g(t,a),y&&y.m(t,null),g(t,u),d&&d.m(t,null),g(t,l),m&&m.m(t,null),g(t,o),g(t,c),T(c,i[4].email),g(t,V),g(t,N),h&&h.m(N,null),g(N,j),g(e,B),b&&b.m(e,null),g(e,D),w&&w.m(e,null),M||(J=[L(c,"input",i[11]),L(t,"submit",ge(i[5]))],M=!0)},p(p,k){k&6&&r!==(r=p[2]?"Forgot Password":p[1]?"Register":"Login")&&H(n,r),p[3].error?y?y.p(p,k):(y=K(p),y.c(),y.m(t,u)):y&&(y.d(1),y=null),p[3].success?d?d.p(p,k):(d=Q(p),d.c(),d.m(t,l)):d&&(d.d(1),d=null),p[2]?m&&(m.d(1),m=null):m?m.p(p,k):(m=X(p),m.c(),m.m(t,o)),k&16&&c.value!==p[4].email&&T(c,p[4].email),p[3].loading?h||(h=ee(),h.c(),h.m(N,j)):h&&(h.d(1),h=null),k&8&&z!==(z=p[3].loading)&&(N.disabled=z),p[2]?b&&(b.d(1),b=null):b?b.p(p,k):(b=te(p),b.c(),b.m(e,D)),p[1]?w&&(w.d(1),w=null):w?w.p(p,k):(w=re(p),w.c(),w.m(e,null))},i:Z,o:Z,d(p){p&&_(e),y&&y.d(),d&&d.d(),m&&m.d(),h&&h.d(),b&&b.d(),w&&w.d(),M=!1,be(J)}}}function K(i){let e,t,s=i[3].error+"",r;return{c(){e=P("div"),t=P("span"),r=q(s),this.h()},l(n){e=v(n,"DIV",{class:!0,role:!0});var a=U(e);t=v(a,"SPAN",{class:!0});var u=U(t);r=R(u,s),u.forEach(_),a.forEach(_),this.h()},h(){f(t,"class","block sm:inline"),f(e,"class","bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative w-5/6 text-center"),f(e,"role","alert")},m(n,a){E(n,e,a),g(e,t),g(t,r)},p(n,a){a&8&&s!==(s=n[3].error+"")&&H(r,s)},d(n){n&&_(e)}}}function Q(i){let e,t,s=i[3].success+"",r;return{c(){e=P("div"),t=P("span"),r=q(s),this.h()},l(n){e=v(n,"DIV",{class:!0,role:!0});var a=U(e);t=v(a,"SPAN",{class:!0});var u=U(t);r=R(u,s),u.forEach(_),a.forEach(_),this.h()},h(){f(t,"class","block sm:inline"),f(e,"class","bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative w-5/6 text-center"),f(e,"role","alert")},m(n,a){E(n,e,a),g(e,t),g(t,r)},p(n,a){a&8&&s!==(s=n[3].success+"")&&H(r,s)},d(n){n&&_(e)}}}function X(i){let e,t,s,r,n,a,u=i[1]&&Y(i),l=i[1]&&x(i);return{c(){u&&u.c(),e=I(),t=P("input"),s=I(),l&&l.c(),r=O(),this.h()},l(o){u&&u.l(o),e=A(o),t=v(o,"INPUT",{type:!0,placeholder:!0,class:!0,"aria-label":!0,minlength:!0}),s=A(o),l&&l.l(o),r=O(),this.h()},h(){f(t,"type","password"),f(t,"placeholder","Password"),f(t,"class","py-3 px-6 w-5/6 text-center text-lg font-bold bg-inherit border-4 border-green-400 border-opacity-75 focus:border-opacity-100 focus:outline-green-400 rounded-full"),t.required=!0,f(t,"aria-label","Password"),f(t,"minlength","8")},m(o,c){u&&u.m(o,c),E(o,e,c),E(o,t,c),T(t,i[4].password1),E(o,s,c),l&&l.m(o,c),E(o,r,c),n||(a=L(t,"input",i[9]),n=!0)},p(o,c){o[1]?u?u.p(o,c):(u=Y(o),u.c(),u.m(e.parentNode,e)):u&&(u.d(1),u=null),c&16&&t.value!==o[4].password1&&T(t,o[4].password1),o[1]?l?l.p(o,c):(l=x(o),l.c(),l.m(r.parentNode,r)):l&&(l.d(1),l=null)},d(o){o&&(_(e),_(t),_(s),_(r)),u&&u.d(o),l&&l.d(o),n=!1,a()}}}function Y(i){let e,t,s;return{c(){e=P("input"),this.h()},l(r){e=v(r,"INPUT",{type:!0,placeholder:!0,class:!0,"aria-label":!0,minlength:!0}),this.h()},h(){f(e,"type","text"),f(e,"placeholder","Username"),f(e,"class","py-3 px-6 w-5/6 text-center text-lg font-bold bg-inherit border-4 border-green-400 border-opacity-75 focus:border-opacity-100 focus:outline-green-400 rounded-full"),e.required=!0,f(e,"aria-label","Username"),f(e,"minlength","3")},m(r,n){E(r,e,n),T(e,i[4].username),t||(s=L(e,"input",i[8]),t=!0)},p(r,n){n&16&&e.value!==r[4].username&&T(e,r[4].username)},d(r){r&&_(e),t=!1,s()}}}function x(i){let e,t,s;return{c(){e=P("input"),this.h()},l(r){e=v(r,"INPUT",{type:!0,placeholder:!0,class:!0,"aria-label":!0,minlength:!0}),this.h()},h(){f(e,"type","password"),f(e,"placeholder","Please repeat your Password"),f(e,"class","py-3 px-6 w-5/6 text-center text-lg font-bold bg-inherit border-4 border-green-400 border-opacity-75 focus:border-opacity-100 focus:outline-green-400 rounded-full"),e.required=!0,f(e,"aria-label","Confirm Password"),f(e,"minlength","8")},m(r,n){E(r,e,n),T(e,i[4].password2),t||(s=L(e,"input",i[10]),t=!0)},p(r,n){n&16&&e.value!==r[4].password2&&T(e,r[4].password2)},d(r){r&&_(e),t=!1,s()}}}function ee(i){let e,t="âŒ›";return{c(){e=P("span"),e.textContent=t,this.h()},l(s){e=v(s,"SPAN",{class:!0,"data-svelte-h":!0}),we(e)!=="svelte-1rod59s"&&(e.textContent=t),this.h()},h(){f(e,"class","animate-spin mr-2")},m(s,r){E(s,e,r)},d(s){s&&_(e)}}}function te(i){let e,t,s,r=i[1]?"Login":"Register",n,a,u;return{c(){e=P("button"),t=q("or "),s=P("span"),n=q(r),this.h()},l(l){e=v(l,"BUTTON",{class:!0,type:!0});var o=U(e);t=R(o,"or "),s=v(o,"SPAN",{class:!0});var c=U(s);n=R(c,r),c.forEach(_),o.forEach(_),this.h()},h(){f(s,"class","font-bold"),f(e,"class","text-green-600 font-md text-center w-1/3 text-xl hover:underline font-semibold opacity-50 p-5"),f(e,"type","button")},m(l,o){E(l,e,o),g(e,t),g(e,s),g(s,n),a||(u=L(e,"click",i[12]),a=!0)},p(l,o){o&2&&r!==(r=l[1]?"Login":"Register")&&H(n,r)},d(l){l&&_(e),a=!1,u()}}}function re(i){let e,t=i[2]?"Can you remember?":"Forgot your Password?",s,r,n;return{c(){e=P("button"),s=q(t),this.h()},l(a){e=v(a,"BUTTON",{class:!0,type:!0});var u=U(e);s=R(u,t),u.forEach(_),this.h()},h(){f(e,"class","absolute bottom-0 text-slate-500 font-md text-center w-1/3 text-lg hover:underline p-5"),f(e,"type","button")},m(a,u){E(a,e,u),g(e,s),r||(n=L(e,"click",i[13]),r=!0)},p(a,u){u&4&&t!==(t=a[2]?"Can you remember?":"Forgot your Password?")&&H(s,t)},d(a){a&&_(e),r=!1,n()}}}function Pe(i){let e,t,s,r;const n=[ve,ke],a=[];function u(l,o){return l[0]?1:0}return e=u(i),t=a[e]=n[e](i),{c(){t.c(),s=O()},l(l){t.l(l),s=O()},m(l,o){a[e].m(l,o),E(l,s,o),r=!0},p(l,[o]){let c=e;e=u(l),e===c?a[e].p(l,o):(ce(),$(a[c],1,1,()=>{a[c]=null}),de(),t=a[e],t?t.p(l,o):(t=a[e]=n[e](l),t.c()),F(t,1),t.m(s.parentNode,s))},i(l){r||(F(t),r=!0)},o(l){$(t),r=!1},d(l){l&&_(s),a[e].d(l)}}}function Ee(i){return/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{8,}$/.test(i)}function Ne(i){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i)}function Se(i,e,t){let{$$slots:s={},$$scope:r}=e,n,a=!0,u=!1,l={loading:!1,error:null,success:null},o={password1:"",password2:"",email:"",username:""};async function c(){t(3,l.loading=!0,l),t(3,l.error=null,l),t(3,l.success=null,l);try{if(!Ne(o.email))throw new Error("Please enter a valid email address");if(u){await j(o.email),t(3,l.success="Password reset email sent!",l);return}if(!Ee(o.password1))throw new Error("Password must be at least 8 characters long and contain uppercase, lowercase, and numbers");if(a){if(o.password1!==o.password2)throw new Error("Passwords do not match");if(!o.username.trim())throw new Error("Username is required");await V(o.email,o.password1,o.username),t(3,l.success="Registration successful! Please check your email to verify your account.",l)}else await N(o.email,o.password1),t(3,l.success="Login successful!",l)}catch(d){t(3,l.error=d instanceof Error?d.message:"An error occurred",l)}finally{t(3,l.loading=!1,l)}}async function V(d,m,h){const{data:b,error:w}=await C.auth.signUp({email:d,password:m,options:{data:{username:h,email:d}}});if(w)throw w;return b}async function N(d,m){const{data:h,error:b}=await C.auth.signInWithPassword({email:d,password:m});if(b)throw b;return h}async function j(d){const{data:m,error:h}=await C.auth.resetPasswordForEmail(d,{redirectTo:"http://localhost:4000/flowwp/reset-password"});if(h)throw h;return m}le(()=>{C.auth.getSession().then(({data:d})=>{d.session&&t(0,n=d.session)}),C.auth.onAuthStateChange((d,m)=>{m&&t(0,n=m)})});function z(){o.username=this.value,t(4,o)}function B(){o.password1=this.value,t(4,o)}function D(){o.password2=this.value,t(4,o)}function M(){o.email=this.value,t(4,o)}const J=()=>t(1,a=!a),y=()=>t(2,u=!u);return i.$$set=d=>{"$$scope"in d&&t(6,r=d.$$scope)},[n,a,u,l,o,c,r,s,z,B,D,M,J,y]}class Ue extends ue{constructor(e){super(),fe(this,e,Se,Pe,se,{})}}function Ae(i){let e,t;return e=new Ue({props:{$$slots:{default:[Te]},$$scope:{ctx:i}}}),{c(){he(e.$$.fragment)},l(s){me(e.$$.fragment,s)},m(s,r){_e(e,s,r),t=!0},p(s,r){const n={};r&4&&(n.$$scope={dirty:r,ctx:s}),e.$set(n)},i(s){t||(F(e.$$.fragment,s),t=!0)},o(s){$(e.$$.fragment,s),t=!1},d(s){pe(e,s)}}}function Ie(i){let e,t,s;return t=new ye({props:{size:"500",color:"#FF3E00",unit:"px",duration:"1s"}}),{c(){e=P("div"),he(t.$$.fragment),this.h()},l(r){e=v(r,"DIV",{class:!0});var n=U(e);me(t.$$.fragment,n),n.forEach(_),this.h()},h(){f(e,"class","w-full min-h-screen flex justify-center items-center")},m(r,n){E(r,e,n),_e(t,e,null),s=!0},p:Z,i(r){s||(F(t.$$.fragment,r),s=!0)},o(r){$(t.$$.fragment,r),s=!1},d(r){r&&_(e),pe(t)}}}function Te(i){let e;const t=i[1].default,s=oe(t,i,i[2],null);return{c(){s&&s.c()},l(r){s&&s.l(r)},m(r,n){s&&s.m(r,n),e=!0},p(r,n){s&&s.p&&(!e||n&4)&&ne(s,t,r,r[2],e?ae(t,r[2],n,null):ie(r[2]),null)},i(r){e||(F(s,r),e=!0)},o(r){$(s,r),e=!1},d(r){s&&s.d(r)}}}function $e(i){let e,t,s,r;const n=[Ie,Ae],a=[];function u(l,o){return l[0]?0:1}return e=u(i),t=a[e]=n[e](i),{c(){t.c(),s=O()},l(l){t.l(l),s=O()},m(l,o){a[e].m(l,o),E(l,s,o),r=!0},p(l,[o]){let c=e;e=u(l),e===c?a[e].p(l,o):(ce(),$(a[c],1,1,()=>{a[c]=null}),de(),t=a[e],t?t.p(l,o):(t=a[e]=n[e](l),t.c()),F(t,1),t.m(s.parentNode,s))},i(l){r||(F(t),r=!0)},o(l){$(t),r=!1},d(l){l&&_(s),a[e].d(l)}}}function Fe(i,e,t){let{$$slots:s={},$$scope:r}=e,n=!0;return le(()=>{C.auth.getSession().then(({data:a})=>{a.session,t(0,n=!1)}),C.auth.onAuthStateChange((a,u)=>{})}),i.$$set=a=>{"$$scope"in a&&t(2,r=a.$$scope)},[n,s,r]}class qe extends ue{constructor(e){super(),fe(this,e,Fe,$e,se,{})}}export{qe as component};
